// Wildlife Exploitation in Illegal Pet Trade - Interactive Functionality

document.addEventListener('DOMContentLoaded', function() {
    // Initialize all interactive features
    initializeHeroStats();
    initializeScrollAnimations();
    initializeCaseStudyModals();
    initializeActionModals();
    initializeNotifications();
});

// Hero Statistics Animation
function initializeHeroStats() {
    const statNumbers = document.querySelectorAll('.stat-number');

    statNumbers.forEach(stat => {
        const target = parseInt(stat.getAttribute('data-target'));
        animateNumber(stat, 0, target, 2000);
    });
}

function animateNumber(element, start, end, duration) {
    const startTime = performance.now();

    function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);

        // Easing function for smooth animation
        const easeOutQuart = 1 - Math.pow(1 - progress, 4);
        const current = Math.floor(start + (end - start) * easeOutQuart);

        element.textContent = current.toLocaleString();

        if (progress < 1) {
            requestAnimationFrame(update);
        }
    }

    requestAnimationFrame(update);
}

// Scroll Animations
function initializeScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in-up');
            }
        });
    }, observerOptions);

    // Observe all cards and sections
    const animatedElements = document.querySelectorAll('.impact-card, .species-card, .health-card, .solution-card, .case-study-card');
    animatedElements.forEach(element => {
        observer.observe(element);
    });
}

// Case Study Modals
function initializeCaseStudyModals() {
    // Modal content data
    const caseStudies = {
        'southeast-asia': {
            title: 'Southeast Asian Primate Trafficking',
            region: 'Indonesia & Malaysia',
            content: `
                <h3>The Orangutan Crisis</h3>
                <p>Borneo and Sumatra have become hotspots for orangutan trafficking, with baby orangutans being stolen from their nests in the wild and sold through online marketplaces and pet stores. This illegal trade contributes significantly to the 80% population decline of these critically endangered primates.</p>

                <h4>Key Impacts:</h4>
                <ul>
                    <li><strong>Population Decline:</strong> 80% reduction in Borneo orangutan populations</li>
                    <li><strong>Ecosystem Disruption:</strong> Loss of seed dispersers affects forest regeneration</li>
                    <li><strong>Human Health Risks:</strong> Increased zoonotic disease transmission</li>
                    <li><strong>Cultural Impact:</strong> Disruption of traditional conservation practices</li>
                </ul>

                <h4>Conservation Response:</h4>
                <p>Anti-trafficking patrols, rehabilitation centers, and community education programs are working to combat this crisis. Organizations like the Borneo Orangutan Survival Foundation rescue and rehabilitate trafficked orangutans, preparing them for reintroduction to the wild.</p>

                <div class="modal-actions">
                    <button onclick="openExternalLink('https://www.orangutan.org/')" class="modal-action-btn">
                        <i class="fas fa-external-link-alt"></i> Learn More
                    </button>
                    <button onclick="openExternalLink('https://www.bosf.org/')" class="modal-action-btn">
                        <i class="fas fa-donate"></i> Support BOSF
                    </button>
                </div>
            `
        },
        'african-parrots': {
            title: 'African Parrot Exploitation',
            region: 'Central & West Africa',
            content: `
                <h3>The Grey Parrot Catastrophe</h3>
                <p>African Grey Parrots, renowned for their intelligence and talking ability, face severe population declines due to capture for the international pet trade. An estimated 21 million birds are captured annually, with many species now critically endangered.</p>

                <h4>Key Impacts:</h4>
                <ul>
                    <li><strong>Massive Scale:</strong> 21 million birds captured annually worldwide</li>
                    <li><strong>Species Extinction:</strong> Multiple parrot species now extinct in the wild</li>
                    <li><strong>Ecosystem Role:</strong> Loss of seed dispersers in African forests</li>
                    <li><strong>Cultural Significance:</strong> Parrots hold important cultural value in many African societies</li>
                </ul>

                <h4>Conservation Response:</h4>
                <p>Organizations like the World Parrot Trust work with local communities to establish protected areas and promote sustainable alternatives to wildlife trade. Captive breeding programs aim to reduce demand for wild-caught birds.</p>

                <div class="modal-actions">
                    <button onclick="openExternalLink('https://www.parrots.org/')" class="modal-action-btn">
                        <i class="fas fa-external-link-alt"></i> World Parrot Trust
                    </button>
                    <button onclick="openExternalLink('https://www.birdlife.org/')" class="modal-action-btn">
                        <i class="fas fa-donate"></i> Support Conservation
                    </button>
                </div>
            `
        },
        'amazon-amphibians': {
            title: 'Amazon Amphibian Collection',
            region: 'South America',
            content: `
                <h3>Poison Dart Frog Exploitation</h3>
                <p>The Amazon rainforest is home to some of the world's most colorful amphibians, including poison dart frogs that have become highly sought after in the exotic pet trade. Collection for the pet market has led to many species becoming extinct in their natural habitats.</p>

                <h4>Key Impacts:</h4>
                <ul>
                    <li><strong>Species Loss:</strong> Many colorful frog species extinct in the wild</li>
                    <li><strong>Biodiversity Crisis:</strong> Amphibians are the most threatened vertebrate group</li>
                    <li><strong>Ecosystem Role:</strong> Important pest controllers in rainforest ecosystems</li>
                    <li><strong>Medical Potential:</strong> Loss of species with potential medicinal compounds</li>
                </ul>

                <h4>Conservation Response:</h4>
                <p>Amphibian conservation organizations work to establish protected areas and captive breeding programs. Public education campaigns aim to reduce demand for wild-caught amphibians and promote captive-bred alternatives.</p>

                <div class="modal-actions">
                    <button onclick="openExternalLink('https://www.amphibianark.org/')" class="modal-action-btn">
                        <i class="fas fa-external-link-alt"></i> Amphibian Ark
                    </button>
                    <button onclick="openExternalLink('https://www.iucn-amphibians.org/')" class="modal-action-btn">
                        <i class="fas fa-donate"></i> Support Conservation
                    </button>
                </div>
            `
        }
    };

    window.openCaseModal = function(caseId) {
        const modal = document.getElementById('caseModal');
        const modalContent = document.getElementById('caseModalContent');

        if (caseStudies[caseId]) {
            modalContent.innerHTML = caseStudies[caseId].content;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
    };

    window.closeCaseModal = function() {
        const modal = document.getElementById('caseModal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    };
}

// Action Modals
function initializeActionModals() {
    const actions = {
        'adopt': {
            title: 'Adopt, Don\'t Buy Wild Animals',
            content: `
                <h3>Choose Adoption Over Exploitation</h3>
                <p>Every time someone purchases a wild-caught animal, it contributes to the illegal wildlife trade. Instead, consider adopting from reputable sanctuaries and rescue organizations.</p>

                <h4>Why Adopt?</h4>
                <ul>
                    <li><strong>No Exploitation:</strong> Adoption doesn't fuel illegal capture</li>
                    <li><strong>Save Lives:</strong> Give rescued animals a second chance</li>
                    <li><strong>Better Welfare:</strong> Adopted animals are often already socialized</li>
                    <li><strong>Legal Compliance:</strong> Avoid supporting illegal activities</li>
                </ul>

                <h4>Adoption Resources:</h4>
                <div class="adoption-links">
                    <button onclick="openExternalLink('https://www.petfinder.com/')" class="adoption-btn">
                        <i class="fas fa-search"></i> Find Pets to Adopt
                    </button>
                    <button onclick="openExternalLink('https://www.adoptapet.com/')" class="adoption-btn">
                        <i class="fas fa-heart"></i> Adopt a Pet
                    </button>
                </div>
            `
        },
        'report': {
            title: 'Report Suspicious Wildlife Activity',
            content: `
                <h3>Report Illegal Wildlife Trade</h3>
                <p>If you suspect illegal wildlife trafficking or exploitation, reporting it can help law enforcement disrupt these criminal networks and save lives.</p>

                <h4>What to Report:</h4>
                <ul>
                    <li><strong>Online Sales:</strong> Suspicious pet listings on social media or websites</li>
                    <li><strong>Unusual Imports:</strong> Large shipments of exotic animals</li>
                    <li><strong>Wildlife Dealers:</strong> Businesses selling protected species</li>
                    <li><strong>Poaching Signs:</strong> Evidence of illegal capture in the wild</li>
                </ul>

                <h4>How to Report:</h4>
                <div class="report-links">
                    <button onclick="openExternalLink('https://www.interpol.int/en/Crimes/Environmental-crime/Wildlife-crime')" class="report-btn">
                        <i class="fas fa-globe"></i> INTERPOL Wildlife Crime
                    </button>
                    <button onclick="openExternalLink('https://www.fws.gov/')" class="report-btn">
                        <i class="fas fa-flag-usa"></i> US Fish & Wildlife
                    </button>
                </div>
            `
        },
        'donate': {
            title: 'Support Wildlife Conservation',
            content: `
                <h3>Make a Difference with Your Donation</h3>
                <p>Your financial support helps fund anti-trafficking patrols, rescue operations, rehabilitation programs, and community education initiatives.</p>

                <h4>How Donations Help:</h4>
                <ul>
                    <li><strong>Rescue Operations:</strong> Fund seizure response and animal rehabilitation</li>
                    <li><strong>Community Programs:</strong> Support alternative livelihood initiatives</li>
                    <li><strong>Legal Action:</strong> Enable prosecution of wildlife traffickers</li>
                    <li><strong>Education:</strong> Reduce demand through awareness campaigns</li>
                </ul>

                <h4>Conservation Partners:</h4>
                <div class="donation-links">
                    <button onclick="openExternalLink('https://www.worldwildlife.org/donate')" class="donation-btn">
                        <i class="fas fa-donate"></i> World Wildlife Fund
                    </button>
                    <button onclick="openExternalLink('https://www.traffic.org/donate/')" class="donation-btn">
                        <i class="fas fa-hand-holding-heart"></i> TRAFFIC
                    </button>
                </div>
            `
        }
    };

    window.openActionModal = function(actionId) {
        const modal = document.getElementById('actionModal');
        const modalContent = document.getElementById('actionModalContent');

        if (actions[actionId]) {
            modalContent.innerHTML = actions[actionId].content;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
    };

    window.closeActionModal = function() {
        const modal = document.getElementById('actionModal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    };
}

// External Link Handler
function openExternalLink(url) {
    window.open(url, '_blank', 'noopener,noreferrer');
    showNotification('Opening external link...', 'info');
}

// Notification System
function initializeNotifications() {
    // Create notification container if it doesn't exist
    if (!document.getElementById('notification-container')) {
        const container = document.createElement('div');
        container.id = 'notification-container';
        container.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            pointer-events: none;
        `;
        document.body.appendChild(container);
    }
}

function showNotification(message, type = 'info') {
    const container = document.getElementById('notification-container');

    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.style.cssText = `
        background: ${getNotificationColor(type)};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        margin-bottom: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        pointer-events: auto;
        cursor: pointer;
        animation: slideInRight 0.3s ease-out;
        max-width: 300px;
        font-weight: 500;
    `;

    notification.innerHTML = `
        <i class="fas ${getNotificationIcon(type)}" style="margin-right: 8px;"></i>
        ${message}
    `;

    container.appendChild(notification);

    // Auto remove after 4 seconds
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 4000);

    // Click to dismiss
    notification.addEventListener('click', () => {
        notification.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    });
}

function getNotificationColor(type) {
    const colors = {
        'success': '#28a745',
        'error': '#dc3545',
        'warning': '#ffc107',
        'info': '#17a2b8'
    };
    return colors[type] || colors.info;
}

function getNotificationIcon(type) {
    const icons = {
        'success': 'fa-check-circle',
        'error': 'fa-exclamation-circle',
        'warning': 'fa-exclamation-triangle',
        'info': 'fa-info-circle'
    };
    return icons[type] || icons.info;
}

// Modal Event Listeners
document.addEventListener('DOMContentLoaded', function() {
    // Close modals when clicking outside
    window.addEventListener('click', function(event) {
        const caseModal = document.getElementById('caseModal');
        const actionModal = document.getElementById('actionModal');

        if (event.target === caseModal) {
            closeCaseModal();
        }
        if (event.target === actionModal) {
            closeActionModal();
        }
    });

    // Close modals with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeCaseModal();
            closeActionModal();
        }
    });
});

// Add CSS animations for notifications
const notificationStyles = `
@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

.notification {
    font-family: 'Poppins', sans-serif;
}

.modal-actions, .adoption-links, .report-links, .donation-links {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
    flex-wrap: wrap;
}

.modal-action-btn, .adoption-btn, .report-btn, .donation-btn {
    padding: 0.75rem 1.5rem;
    border: 2px solid #007bff;
    background: transparent;
    color: #007bff;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
}

.modal-action-btn:hover, .adoption-btn:hover, .report-btn:hover, .donation-btn:hover {
    background: #007bff;
    color: white;
    text-decoration: none;
}
`;

// Inject notification styles
const styleSheet = document.createElement('style');
styleSheet.textContent = notificationStyles;
document.head.appendChild(styleSheet);

// Performance optimization: Debounce scroll events
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Export functions for potential use in other scripts
window.WildlifeExploitation = {
    showNotification,
    openExternalLink,
    openCaseModal,
    closeCaseModal,
    openActionModal,
    closeActionModal
};</content>
<parameter name="filePath">C:\Users\Gupta\Downloads\Environment_Animal_Safety_Hub\frontend\js\pages\wildlife-exploitation.js